# <p align="center"> Разработка системы управления заказами в кафе</p>


***
## Оглавление
- [Технологии](#технологии)
- [Описание работы](#описание-работы)
- [Функционал](#функционал)
- [Rest Api](#Rest-Api)
- [Тестирование](#тестирование)
- [Инструкция по развертыванию проекта](#инструкция-по-развертыванию-проекта)
- [Вывод](#вывод)
***


### Поставленная задача: 
**Необходимо разработать полнофункциональное веб-приложение на Django для управления заказами в кафе. Предоставить API для работы с заказами (добавление, удаление, поиск и т. д.).**


## Функциональные возможности
- **Добавление заказа**: Позволяет пользователю добавлять новый заказ, включая номер стола, список блюд с ценами и статус заказа.
- **Удаление заказа**: Возможность удаления существующих заказов.
- **Поиск заказа**: Поиск заказов по различным критериям, таким как номер стола или статус.
- **Изменение заказа**: Редактирование информации о заказе, включая добавление или удаление блюд и изменение статуса.
- **Отображение заказов**: Просмотр всех заказов с их деталями.


***
## Технологии
В данном проекте использованы следующие технологии:
- **Язык программирования**: [Python 3.12](https://www.python.org/)
- **Веб-фреймворк**: [Django 5.1.7](https://www.djangoproject.com/)
- **База данных**: [PostgreSQL](https://www.postgresql.org/)
- **Библиотеки**: Все необходимые библиотеки указаны в файле [requirements.txt](requirements.txt)
- **Документрирование**: drf-yasg, swagger


***
## Описание работы
В данном проекте была создана модель **Order**. Каждый заказ содержит следующие поля [models.py](orders/models.py):

- **id**: Уникальный идентификатор (генерируется автоматически).
- **table_number**: Номер стола.
- **items**: Список заказанных блюд с ценами.
- **total_price**: Общая стоимость заказа (вычисляется автоматически).
- **status**: Статус заказа (возможные значения: “в ожидании”, “готово”, “оплачено”).

***
## Функционал
В проекте реализованы CRUD операции и несколько представлений для работы с заказами. Эти представления предоставляют API-интерфейсы для взаимодействия с данными [views.py](orders/views.py):

- **OrderList**: Отображает список всех заказов, позволяя пользователям видеть текущие заказы.
- **OrderCreate**: Позволяет добавлять новый заказ, упрощая процесс оформления.
- **OrderStatusUpdate**: Обновляет статус существующего заказа, что позволяет отслеживать его состояние.
- **OrderDelete**: Удаляет существующий заказ, если он больше не нужен.
- **OrderRevenue**: Вычисляет общую выручку от всех заказов, предоставляя важную информацию для анализа.
- **OrderUpdate**: Позволяет редактировать информацию о заказе, что важно для внесения корректировок.

### Формы

Для удобства работы с данными в проекте реализованы формы, которые упрощают ввод информации [forms.py](orders/forms.py):

- **OrderForm**: Форма для создания нового заказа, обеспечивающая интуитивно понятный интерфейс.
- **OrderStatusUpdate**: Форма для обновления статуса заказа, позволяющая быстро вносить изменения.
- **OrderEditForm**: Форма для редактирования информации о заказе, что делает процесс редактирования более удобным.

### Сериализаторы

Сериализаторы играют ключевую роль в преобразовании данных между форматом JSON и внутренними структурами данных. Они обеспечивают эффективное взаимодействие между клиентом и сервером, позволяя легко передавать и получать данные [serializers.py](orders/serializers.py):
- **OrderItemSerializer**: Сериализатор для элементов заказа (блюд). Валидирует данные каждого блюда в заказе.
- **OrderSerializer**: Основной сериализатор для заказов. Обрабатывает создание и обновление заказов, включая вложенные элементы.
- **OrderStatusSerializer**: Сериализатор только для изменения статуса заказа. Используется для отдельных endpoint'ов обновления статуса.
***
### REST API

Проект предоставляет REST API с множеством эндпоинтов для работы с заказами. Это позволяет интегрировать систему с другими сервисами и клиентами. API включает в себя следующие эндпоинты:

- **GET** /SubmitData: Получение данных о заказах.
- **POST** /SubmitData: Отправка новых данных о заказе.
- **GET** /SubmitData/revenue: Получение данных о выручке с оплаченных заказов.
- **GET** /SubmitData/{id}: Получение данных о конкретном заказе по его ID.
- **PUT** /SubmitData/{id}: Полное обновление данных о конкретном заказе по его ID.
- **PATCH** /SubmitData/{id}: Частичное обновление данных о конкретном заказе по его ID.
- **DELETE** /SubmitData/{id}: Удаление заказа по его ID.
- **PATCH** /SubmitData/{id}/status: Обновление статуса заказа по его ID.

*Подробнее можно ознакомиться по адресу: http://127.0.0.1:8000/swagger/*
***
### Тестирование

Были проведены тесты по всем ключевым методам, а также по API, что позволяет гарантировать их корректную работу и стабильность приложения.
Все необходимые тесты указаны в файле: [tests.py](orders/tests/)
- Тесты forms.py: [test_forms.py](orders/tests/test_forms.py)
- Тесты views.py: [test_views.py](orders/tests/test_views.py)
- Тесты api.py: [test_api.py](orders/tests/test_api.py)
- Функции настройки тестов: [conftest.py](orders/tests/conftest.py)
Подробнее о результатах тестов можно ознакомиться здесь: [coverage](htmlcov/index.html) или здесь: [coverage](coverage)
***
## Инструкция по развертыванию проекта.

1. Требования к системе
- Python 3.12
- PostgreSQL (или SQLite для разработки)
- Virtualenv
2. Установка зависимостей\
- git clone https://github.com/VanyaSHEIKH/DjangoProjectForCafe - клонирование репозитория
- cd cafe 
- python -m venv venv - создание виртуального окружения
- pip install -r requirements.txt - установка необходимых зависимостей
3. Настройка окружения
- Создайте файл .env в корне проекта:
- FSTR_DB_ENGINE=**django.db.backends.postgresql**
- FSTR_DB_NAME=**Название базы данных**
- FSTR_DB_USER=**Имя пользователя**
- FSTR_DB_PASS=**Пароль от аккаунта**
- FSTR_DB_HOST=localhost
- FSTR_DB_PORT=**Порт**
- options="-c client_encoding=**UTF8"**
4. Миграции и статические файлы
- python manage.py makemigrations
- python manage.py migrate
5. Запуск проекта
- python manage.py runserver

***
## Вывод
В результате проделанной работы было успешно разработано веб-приложение для управления заказами в кафе, а также функциональный REST API. Разработка данного API позволяет упростить взаимодействие с данными и улучшить доступность информации для пользователей.

В процессе разработки каждая новая фича коммитилилась с детальными сообщениями, после чего проект был слит в master. Коммиты выполнялись атомарно по принципу 'одна логическая единица изменений - один коммит'."

**Документация сгенерирована с помощью ***swagger***, представлена в указанном файле:**

[swagger.yaml](orders/swagger.yaml)

**Доступ к **веб-приложению** доступен по адресу:**

http://127.0.0.1:8000/orders/

**Доступ к ***swagger*** доступен по адресу:**

http://127.0.0.1:8000/swagger/

**Доступ к ***api*** осуществляется по адресу:**

http://127.0.0.1:8000/api/
***

**Проект опубликован на ***GitHub*** по следующему адресу:**

https://github.com/VanyaSHEIKH/DjangoProjectForCafe
***

**Автор:**

[Mikhov Ivan Sergeevich](https://github.com/VanyaSHEIKH/)